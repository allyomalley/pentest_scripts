#!/usr/bin/expect

set domain "example.com"

#SUBLISTER
set timeout -1
spawn ../Sublist3r/sublist3r.py -d $domain -o subdomains.txt
expect "% "

#CENSYS
set timeout -1
spawn python ../censys-subdomain-finder/censys_subdomain_finder.py $domain -o censys.txt
expect "% "
spawn bash -c "cat censys.txt >> subdomains.txt"
expect "% "

#SHODAN
set timeout -1
spawn python shodan_subdomain_finder.py $domain
expect "% "
spawn bash -c "cat shodan_subdomains.txt >> subdomains.txt"
expect "% "

#SUBBRUTE
set timeout -1
spawn ../subbrute/subbrute.py $domain -o subbrute.txt
expect "% "
spawn bash -c "cat subbrute.txt >> subdomains.txt"
expect "% "

#REMOVE DUPS
spawn bash -c "cat subdomains.txt | uniq > dups.txt"
spawn bash -c "cat dups.txt > subdomains.txt"

#TAKEOVER
set timeout -1
spawn ../TakeOver-v1/takeover.sh
expect "File Name:"
log_file takeover.txt
send -- "subdomains.txt\r"
expect "% "
log_file
wait

#GITFINDER
set timeout -1
spawn python ../GitTools/Finder/gitfinder.py -i subdomains.txt
expect "% "
wait

#EXTRACT INTESTING / TAKEOVER POTENTIAL DOMAINS
set timeout -1
spawn  ../matchTakeovers.sh takeover.txt
expect "% "
wait
